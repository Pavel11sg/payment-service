databaseChangeLog:
  - changeSet:
      id: "1"
      author: pavel11sg
      comment: Create initial indexes for the payments collection
      changes:
        - runCommand:
            command: |
              {
                "createIndexes": "payments",
                "indexes": [
                  {
                    "key": {"order_id": 1},
                    "name": "order_id_idx"
                  },
                  {
                    "key": {"user_id": 1},
                    "name": "user_id_idx"
                  },
                  {
                    "key": {"status": 1},
                    "name": "status_idx"
                  },
                  {
                    "key": {"timestamp": -1},
                    "name": "timestamp_idx"
                  },
                  {
                    "key": {"user_id": 1, "timestamp": -1},
                    "name": "user_timestamp_compound_idx"
                  },
                  {
                    "key": {"processor_transaction_id": 1},
                    "name": "processor_tx_id_idx",
                    "unique": true
                  },
                  {
                    "key": {"payment_method_token": 1},
                    "name": "payment_method_token_idx"
                  },
                  {
                    "key": {"currency": 1},
                    "name": "currency_idx"
                  },
                  {
                    "key": {"status": 1, "timestamp": -1},
                    "name": "status_timestamp_compound_idx"
                  },
                  {
                    "key": {"timestamp": -1, "currency": 1},
                    "name": "timestamp_currency_compound_idx"
                  }
                ]
              }